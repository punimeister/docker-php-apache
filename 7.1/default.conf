<VirtualHost *:80>
  ServerAlias ${APACHE_SERVER_ALIAS}
  ServerName ${APACHE_SERVER_NAME}
  DocumentRoot ${APP_HOME_DIR}${PUBLIC_DIR}

  DirectoryIndex index.php index.html

  <Directory "${APP_HOME_DIR}">
    Options -Indexes +FollowSymLinks
    AllowOverride All
    Require all granted
  </Directory>

  ErrorLog ${APACHE_LOG_DIR}/error_log
  CustomLog ${APACHE_LOG_DIR}/access_log combined
</VirtualHost>

<VirtualHost *:443>
  ServerAlias ${APACHE_SERVER_ALIAS}
  ServerName ${APACHE_SERVER_NAME}
  DocumentRoot ${APP_HOME_DIR}${PUBLIC_DIR}

  DirectoryIndex index.php index.html

  <IfModule mod_ssl.c>
    SSLEngine on
    SSLCertificateFile /certs/docker.pem
    SSLCertificateKeyFile /certs/docker-key.pem
  </IfModule>

  <Directory "${APP_HOME_DIR}">
    Options -Indexes +FollowSymLinks
    AllowOverride All
    Require all granted
  </Directory>

  ErrorLog ${APACHE_LOG_DIR}/ssl_error_log
  CustomLog ${APACHE_LOG_DIR}/ssl_access_log combined
</VirtualHost>
